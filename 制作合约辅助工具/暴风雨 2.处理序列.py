#===================================================================================#

# 从 获得亮度.py 获得亮度列表，分割为6次打闪，记入 list1 ~ list6

# 运行，得到处理后的窗口透明度序列，粘贴进 CrisisContract.py 中的 aftermath_list

#===================================================================================#

import numpy as np

def main():
    list1 = [251, 251, 251, 242, 242, 232, 232, 222, 222, 213, 213, 213, 202, 202, 202, 191, 191, 183, 183, 167, 167, 167, 156, 156, 150, 150, 150, 136, 136, 124, 124, 119, 119, 119, 96, 96, 83, 83, 83, 79, 79, 72, 72, 60, 60, 60, 60, 46, 46, 40, 38, 38, 40, 40, 40, 38, 38, 38, 37, 37, 35, 35, 35, 31, 29, 29, 29, 33, 33, 33, 32, 32, 31, 31, 31, 27, 23, 23, 23, 23, 23, 23, 25, 25, 24, 24, 23, 23, 23, 23, 23, 23, 106, 106, 101, 101, 103, 103, 103, 95, 90, 90, 90, 90, 90, 88, 71, 71, 71, 66, 66, 74, 71, 71, 71, 66, 66, 66, 52, 52, 52, 46, 46, 41, 33, 33, 33, 31, 31, 31, 28, 28, 28, 30, 30, 23, 23, 23, 23, 23, 28, 28, 26, 26, 26, 26, 26, 26, 23, 23, 23, 23, 23, 22, 22, 22, 24, 24, 24, 24, 22, 22, 22, 22, 22, 23, 23, 23, 22, 22, 22, 24, 24, 23, 23, 22, 22, 22, 22, 22, 22, 22]
    list2 = [251, 251, 251, 242, 242, 242, 232, 232, 222, 222, 213, 213, 202, 202, 202, 192, 192, 179, 179, 180, 168, 168, 155, 155, 147, 147, 147, 147, 134, 134, 115, 106, 106, 106, 99, 99, 84, 84, 84, 74, 74, 74, 60, 60, 52, 52, 52, 52, 50, 50, 50, 35, 35, 35, 32, 31, 31, 35, 35, 35, 28, 28, 28, 27, 27, 27, 24, 23, 23, 23, 23, 25, 25, 25, 25, 25, 23, 23, 23, 28, 28, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 108, 94, 94, 94, 100, 100, 100, 95, 95, 83, 83, 82, 82, 76, 76, 70, 70, 70, 70, 70, 67, 67, 62, 63, 63, 53, 53, 53, 48, 48, 48, 47, 47, 32, 32, 32, 28, 28, 30, 30, 28, 28, 28, 29, 26, 26, 30, 30, 27, 27, 26, 26, 23, 23, 23, 28, 28, 28, 28, 28, 28, 28, 24, 24, 24, 24, 24, 24, 26, 26, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 22]
    list3 = [247, 247, 247, 240, 240, 240, 240, 229, 229, 220, 206, 206, 206, 198, 198, 189, 189, 189, 174, 174, 174, 163, 151, 151, 151, 148, 148, 136, 136, 136, 119, 111, 112, 112, 99, 99, 99, 87, 87, 78, 78, 78, 66, 53, 53, 53, 37, 37, 37, 36, 36, 38, 38, 38, 44, 44, 42, 42, 42, 40, 40, 30, 30, 35, 35, 35, 35, 34, 34, 28, 30, 30, 30, 29, 29, 24, 24, 24, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 114, 114, 101, 96, 96, 96, 89, 89, 90, 90, 90, 87, 79, 79, 79, 75, 75, 75, 67, 67, 62, 62, 62, 57, 57, 52, 52, 52, 53, 46, 46, 46, 43, 43, 43, 39, 39, 39, 35, 35, 30, 30, 24, 24, 24, 24, 24, 24, 24, 24, 22, 22, 22, 22, 22, 22, 26, 26, 26, 26, 26, 26, 26, 23, 23, 25, 25, 25, 25, 25, 25, 22]
    list4 = [246, 246, 246, 246, 235, 235, 226, 217, 217, 217, 204, 204, 197, 197, 197, 186, 186, 169, 169, 160, 160, 154, 154, 137, 137, 137, 137, 137, 125, 125, 113, 107, 107, 107, 86, 86, 74, 74, 74, 67, 67, 67, 47, 47, 36, 36, 34, 34, 37, 37, 37, 36, 41, 41, 41, 41, 28, 27, 27, 27, 36, 36, 36, 36, 30, 30, 28, 28, 27, 23, 23, 23, 22, 22, 22, 27, 27, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 22]
    list5 = [251, 251, 242, 242, 238, 238, 232, 232, 228, 228, 228, 223, 223, 223, 218, 211, 211, 211, 205, 205, 202, 202, 202, 199, 194, 194, 194, 194, 189, 182, 182, 182, 176, 176, 176, 176, 172, 172, 166, 166, 160, 153, 153, 153, 150, 150, 150, 151, 143, 143, 143, 143, 137, 137, 129, 129, 121, 121, 121, 113, 113, 110, 110, 100, 100, 100, 100, 100, 95, 95, 95, 76, 75, 75, 81, 81, 76, 76, 62, 62, 60, 60, 60, 60, 57, 57, 42, 48, 48, 48, 48, 48, 46, 46, 46, 46, 46, 45, 45, 45, 41, 31, 31, 31, 31, 31, 31, 33, 33, 32, 32, 32, 32, 35, 35, 35, 35, 35, 35, 34, 34, 34, 34, 34, 34, 34, 34, 34, 24, 24, 24, 34, 34, 34, 34, 32, 32, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 26, 26, 26, 26, 23, 23, 23, 25, 25, 25, 24, 23, 23, 22]
    list6 = [251, 251, 251, 251, 247, 247, 242, 242, 238, 232, 232, 232, 227, 227, 227, 227, 222, 222, 215, 210, 210, 210, 205, 205, 202, 202, 202, 202, 192, 192, 186, 184, 184, 184, 180, 180, 177, 177, 177, 169, 169, 163, 163, 163, 158, 153, 153, 153, 147, 147, 147, 146, 146, 146, 131, 125, 125, 125, 128, 128, 119, 119, 119, 113, 96, 96, 96, 103, 103, 94, 94, 89, 89, 88, 89, 89, 75, 75, 66, 66, 59, 59, 60, 60, 58, 58, 58, 52, 52, 44, 44, 36, 36, 36, 36, 36, 41, 41, 41, 36, 36, 37, 36, 36, 40, 40, 40, 41, 40, 40, 40, 40, 43, 43, 31, 31, 31, 31, 27, 27, 32, 32, 32, 32, 32, 32, 26, 32, 32, 31, 31, 24, 24, 24, 24, 28, 28, 28, 27, 27, 24, 24, 29, 29, 28, 28, 28, 28, 28, 28, 22, 22, 22, 24, 24, 24, 23, 23, 23, 23, 22, 22, 23, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 22]
    
    input = list6  # 处理哪个列表

    # 应减去22，用0来代表完全黑暗
    max = 251-22
    for i in range(len(input)):
        input[i] = input[i] - 22 

    # 为了将序列线性压缩至[0,1]，直接 i/列表中的最大值，即 i/max
    # 此时宽度是1，假如想要完全效仿pvz，可以分出1的宽度给白色的透明度、1的宽度给黑色的透明度，宽度需要变为2，即i/max*2
    # 由于CrisisContract.py里设置透明度的参数范围是[0，1]，想到可以将0设为2这个宽度的中心，正负方向上宽度都是1
    # 现在的范围是[-2,0]，故代码前面有一个+1，变成 [-1,1]
    # CrisisContract.py里只读取余波，不会涉及到白色窗口，所以这个功能其实没用到
    # 但如果启用，可以这么小改一下代码：
    # if 从序列里读出的这个数大于0：
    #   窗口调为黑色
    # else:
    #   窗口调为白色
    # 读取到的透明度加一个abs()，以获得序列里数的绝对值
    output = [round((1 - (i/max*2)),4) for i in input]
    # output = [round((1 - (i/np.max((input)))),4) for i in input]
    
    print(output) # 得到的输出序列是覆盖窗口的透明度

if __name__ == "__main__":
    main()

# 上面六个列表的输出结果
# [-1.0, -1.0, -1.0, -0.9214, -0.9214, -0.8341, -0.8341, -0.7467, -0.7467, -0.6681, -0.6681, -0.6681, -0.5721, -0.5721, -0.5721, -0.476, -0.476, -0.4061, -0.4061, -0.2664, -0.2664, -0.2664, -0.1703, -0.1703, -0.1179, -0.1179, -0.1179, 0.0044, 0.0044, 0.1092, 0.1092, 0.1528, 0.1528, 0.1528, 0.3537, 0.3537, 0.4672, 0.4672, 0.4672, 0.5022, 0.5022, 0.5633, 0.5633, 0.6681, 0.6681, 0.6681, 0.6681, 0.7904, 0.7904, 0.8428, 0.8603, 0.8603, 0.8428, 0.8428, 0.8428, 0.8603, 0.8603, 0.8603, 0.869, 0.869, 0.8865, 0.8865, 0.8865, 0.9214, 0.9389, 0.9389, 0.9389, 0.9039, 0.9039, 0.9039, 0.9127, 0.9127, 0.9214, 0.9214, 0.9214, 0.9563, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9738, 0.9738, 0.9825, 0.9825, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.2664, 0.2664, 0.31, 0.31, 0.2926, 0.2926, 0.2926, 0.3624, 0.4061, 0.4061, 0.4061, 0.4061, 0.4061, 0.4236, 0.5721, 0.5721, 0.5721, 0.6157, 0.6157, 0.5459, 0.5721, 0.5721, 0.5721, 0.6157, 0.6157, 0.6157, 0.738, 0.738, 0.738, 0.7904, 0.7904, 0.8341, 0.9039, 0.9039, 0.9039, 0.9214, 0.9214, 0.9214, 0.9476, 0.9476, 0.9476, 0.9301, 0.9301, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9476, 0.9476, 0.9651, 0.9651, 0.9651, 0.9651, 0.9651, 0.9651, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 1.0, 1.0, 1.0, 0.9825, 0.9825, 0.9825, 0.9825, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9913, 0.9913, 0.9913, 1.0, 1.0, 1.0, 0.9825, 0.9825, 0.9913, 0.9913, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
# [-1.0, -1.0, -1.0, -0.9214, -0.9214, -0.9214, -0.8341, -0.8341, -0.7467, -0.7467, -0.6681, -0.6681, -0.5721, -0.5721, -0.5721, -0.4847, -0.4847, -0.3712, -0.3712, -0.3799, -0.2751, -0.2751, -0.1616, -0.1616, -0.0917, -0.0917, -0.0917, -0.0917, 0.0218, 0.0218, 0.1878, 0.2664, 0.2664, 0.2664, 0.3275, 0.3275, 0.4585, 0.4585, 0.4585, 0.5459, 0.5459, 0.5459, 0.6681, 0.6681, 0.738, 0.738, 0.738, 0.738, 0.7555, 0.7555, 0.7555, 0.8865, 0.8865, 0.8865, 0.9127, 0.9214, 0.9214, 0.8865, 0.8865, 0.8865, 0.9476, 0.9476, 0.9476, 0.9563, 0.9563, 0.9563, 0.9825, 0.9913, 0.9913, 0.9913, 0.9913, 0.9738, 0.9738, 0.9738, 0.9738, 0.9738, 0.9913, 0.9913, 0.9913, 0.9476, 0.9476, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.2489, 0.3712, 0.3712, 0.3712, 0.3188, 0.3188, 0.3188, 0.3624, 0.3624, 0.4672, 0.4672, 0.476, 0.476, 0.5284, 0.5284, 0.5808, 0.5808, 0.5808, 0.5808, 0.5808, 0.607, 0.607, 0.6507, 0.6419, 0.6419, 0.7293, 0.7293, 0.7293, 0.7729, 0.7729, 0.7729, 0.7817, 0.7817, 0.9127, 0.9127, 0.9127, 0.9476, 0.9476, 0.9301, 0.9301, 0.9476, 0.9476, 0.9476, 0.9389, 0.9651, 0.9651, 0.9301, 0.9301, 0.9563, 0.9563, 0.9651, 0.9651, 0.9913, 0.9913, 0.9913, 0.9476, 0.9476, 0.9476, 0.9476, 0.9476, 0.9476, 0.9476, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 0.9651, 0.9651, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 1.0]
# [-0.9651, -0.9651, -0.9651, -0.9039, -0.9039, -0.9039, -0.9039, -0.8079, -0.8079, -0.7293, -0.607, -0.607, -0.607, -0.5371, -0.5371, -0.4585, -0.4585, -0.4585, -0.3275, -0.3275, -0.3275, -0.2314, -0.1266, -0.1266, -0.1266, -0.1004, -0.1004, 0.0044, 0.0044, 0.0044, 0.1528, 0.2227, 0.214, 0.214, 0.3275, 0.3275, 0.3275, 0.4323, 0.4323, 0.5109, 0.5109, 0.5109, 0.6157, 0.7293, 0.7293, 0.7293, 0.869, 0.869, 0.869, 0.8777, 0.8777, 0.8603, 0.8603, 0.8603, 0.8079, 0.8079, 0.8253, 0.8253, 0.8253, 0.8428, 0.8428, 0.9301, 0.9301, 0.8865, 0.8865, 0.8865, 0.8865, 0.8952, 0.8952, 0.9476, 0.9301, 0.9301, 0.9301, 0.9389, 0.9389, 0.9825, 0.9825, 0.9825, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.1965, 0.1965, 0.31, 0.3537, 0.3537, 0.3537, 0.4148, 0.4148, 0.4061, 0.4061, 0.4061, 0.4323, 0.5022, 0.5022, 0.5022, 0.5371, 0.5371, 0.5371, 0.607, 0.607, 0.6507, 0.6507, 0.6507, 0.6943, 0.6943, 0.738, 0.738, 0.738, 0.7293, 0.7904, 0.7904, 0.7904, 0.8166, 0.8166, 0.8166, 0.8515, 0.8515, 0.8515, 0.8865, 0.8865, 0.9301, 0.9301, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 0.9825, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9651, 0.9651, 0.9651, 0.9651, 0.9651, 0.9651, 0.9651, 0.9913, 0.9913, 0.9738, 0.9738, 0.9738, 0.9738, 0.9738, 0.9738, 1.0]
# [-0.9563, -0.9563, -0.9563, -0.9563, -0.8603, -0.8603, -0.7817, -0.7031, -0.7031, -0.7031, -0.5895, -0.5895, -0.5284, -0.5284, -0.5284, -0.4323, -0.4323, -0.2838, -0.2838, -0.2052, -0.2052, -0.1528, -0.1528, -0.0044, -0.0044, -0.0044, -0.0044, -0.0044, 0.1004, 0.1004, 0.2052, 0.2576, 0.2576, 0.2576, 0.441, 0.441, 0.5459, 0.5459, 0.5459, 0.607, 0.607, 0.607, 0.7817, 0.7817, 0.8777, 0.8777, 0.8952, 0.8952, 0.869, 0.869, 0.869, 0.8777, 0.8341, 0.8341, 0.8341, 0.8341, 0.9476, 0.9563, 0.9563, 0.9563, 0.8777, 0.8777, 0.8777, 0.8777, 0.9301, 0.9301, 0.9476, 0.9476, 0.9563, 0.9913, 0.9913, 0.9913, 1.0, 1.0, 1.0, 0.9563, 0.9563, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 1.0]
# [-1.0, -1.0, -0.9214, -0.9214, -0.8865, -0.8865, -0.8341, -0.8341, -0.7991, -0.7991, -0.7991, -0.7555, -0.7555, -0.7555, -0.7118, -0.6507, -0.6507, -0.6507, -0.5983, -0.5983, -0.5721, -0.5721, -0.5721, -0.5459, -0.5022, -0.5022, -0.5022, -0.5022, -0.4585, -0.3974, -0.3974, -0.3974, -0.345, -0.345, -0.345, -0.345, -0.31, -0.31, -0.2576, -0.2576, -0.2052, -0.1441, -0.1441, -0.1441, -0.1179, -0.1179, -0.1179, -0.1266, -0.0568, -0.0568, -0.0568, -0.0568, -0.0044, -0.0044, 0.0655, 0.0655, 0.1354, 0.1354, 0.1354, 0.2052, 0.2052, 0.2314, 0.2314, 0.3188, 0.3188, 0.3188, 0.3188, 0.3188, 0.3624, 0.3624, 0.3624, 0.5284, 0.5371, 0.5371, 0.4847, 0.4847, 0.5284, 0.5284, 0.6507, 0.6507, 0.6681, 0.6681, 0.6681, 0.6681, 0.6943, 0.6943, 0.8253, 0.7729, 0.7729, 0.7729, 0.7729, 0.7729, 0.7904, 0.7904, 0.7904, 0.7904, 0.7904, 0.7991, 0.7991, 0.7991, 0.8341, 0.9214, 0.9214, 0.9214, 0.9214, 0.9214, 0.9214, 0.9039, 0.9039, 0.9127, 0.9127, 0.9127, 0.9127, 0.8865, 0.8865, 0.8865, 0.8865, 0.8865, 0.8865, 0.8952, 0.8952, 0.8952, 0.8952, 0.8952, 0.8952, 0.8952, 0.8952, 0.8952, 0.9825, 0.9825, 0.9825, 0.8952, 0.8952, 0.8952, 0.8952, 0.9127, 0.9127, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9913, 0.9825, 0.9825, 0.9825, 0.9825, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9651, 0.9651, 0.9651, 0.9651, 0.9913, 0.9913, 0.9913, 0.9738, 0.9738, 0.9738, 0.9825, 0.9913, 0.9913, 1.0]
# [-1.0, -1.0, -1.0, -1.0, -0.9651, -0.9651, -0.9214, -0.9214, -0.8865, -0.8341, -0.8341, -0.8341, -0.7904, -0.7904, -0.7904, -0.7904, -0.7467, -0.7467, -0.6856, -0.6419, -0.6419, -0.6419, -0.5983, -0.5983, -0.5721, -0.5721, -0.5721, -0.5721, -0.4847, -0.4847, -0.4323, -0.4148, -0.4148, -0.4148, -0.3799, -0.3799, -0.3537, -0.3537, -0.3537, -0.2838, -0.2838, -0.2314, -0.2314, -0.2314, -0.1878, -0.1441, -0.1441, -0.1441, -0.0917, -0.0917, -0.0917, -0.083, -0.083, -0.083, 0.048, 0.1004, 0.1004, 0.1004, 0.0742, 0.0742, 0.1528, 0.1528, 0.1528, 0.2052, 0.3537, 0.3537, 0.3537, 0.2926, 0.2926, 0.3712, 0.3712, 0.4148, 0.4148, 0.4236, 0.4148, 0.4148, 0.5371, 0.5371, 0.6157, 0.6157, 0.6769, 0.6769, 0.6681, 0.6681, 0.6856, 0.6856, 0.6856, 0.738, 0.738, 0.8079, 0.8079, 0.8777, 0.8777, 0.8777, 0.8777, 0.8777, 0.8341, 0.8341, 0.8341, 0.8777, 0.8777, 0.869, 0.8777, 0.8777, 0.8428, 0.8428, 0.8428, 0.8341, 0.8428, 0.8428, 0.8428, 0.8428, 0.8166, 0.8166, 0.9214, 0.9214, 0.9214, 0.9214, 0.9563, 0.9563, 0.9127, 0.9127, 0.9127, 0.9127, 0.9127, 0.9127, 0.9651, 0.9127, 0.9127, 0.9214, 0.9214, 0.9825, 0.9825, 0.9825, 0.9825, 0.9476, 0.9476, 0.9476, 0.9563, 0.9563, 0.9825, 0.9825, 0.9389, 0.9389, 0.9476, 0.9476, 0.9476, 0.9476, 0.9476, 0.9476, 1.0, 1.0, 1.0, 0.9825, 0.9825, 0.9825, 0.9913, 0.9913, 0.9913, 0.9913, 1.0, 1.0, 0.9913, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9913, 0.9913, 1.0]
